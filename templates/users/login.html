<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css')}}" />
		<link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}" />

		<title>Loyalty</title>
	</head>

	<body>
		<div
			class="modal fade"
			id="staticBackdrop"
			data-backdrop="static"
			tabindex="-1"
			role="dialog"
			aria-labelledby="staticBackdrop"
			aria-hidden="true"
		>
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header bg-secondary text-light">
						<h5 class="modal-title" id="staticBackdrop1">Message</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body font-weight-normal text-info"></div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<div class="row">
				<div class="col-sm-12">
					<form class="form-signin" action="{{ url_for('users.login_user') }}" method="post">
						<div class="text-center mb-4">
							<img class="mb-4" src="{{ url_for('static', filename='jpg/shell.jpg') }}" alt="" width="72" height="72" />
							<h1 id="dealerName" class="h3 mb-3 font-weight-bolder"></h1>
						</div>

						<div class="form-label-group">
							<input type="text" class="form-control form-control-lg" id="dealercode" name="dealercode" disabled />
							<label for="dealercode">Dealer Code</label>
						</div>

						<div class="form-label-group">
							<input type="text" id="username" name="username" class="form-control" placeholder="User Name" maxlength="10" required autofocus />
							<label for="username">User name</label>
						</div>

						<div class="form-label-group">
							<input
								type="password"
								id="inputPassword"
								name="password"
								class="form-control"
								placeholder="Password"
								aria-describedby="passwordHelpBlock"
								required
							/>
							<label for="inputPassword">Password</label>
							<small id="passwordHelpBlock" class="form-text text-muted">
								Your password must be 8-20 characters long, contain letters and numbers and special characters.
							</small>
						</div>
						<div>
							<button class="btn btn-lg btn-primary btn-block" type="submit">Sign in</button>
						</div>
						<br />
					</form>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12 form-signin">
					{% with messages = get_flashed_messages(with_categories=true) %} {% if messages %} {% for category, message in messages %}
					<div id="message" class="alert alert-{{category}} alert-dismissible fade show" role="alert">
						<strong>{{message}}</strong>
					</div>
					{% endfor %} {% endif %} {% endwith %}
				</div>
			</div>
		</div>

		<script src="{{ url_for('static', filename='js/jquery-3.5.0.js') }}"></script>

		<script>
			$(document).ready(function () {
				// event.preventDefault();

				var dealercode = $('#dealercode');

				$.ajax({
					type: 'GET',
					url: '/user_register',
					success: function (data) {
						dealercode.val(data.dealer_code);
						$('#dealerName').text(data.dealer_name);
					},
					error: function (jqHXR, textStatus, errorThrown) {
						showMsg(jqXHR.status + ' ' + errorThrown);
					},
				});

				if ($('.alert').show()) {
					$('.alert').delay(1000).hide(500);
				}
			});
		</script>
	</body>
</html>
